{
  "hash": "b6a713113dc0c6fbba1aca1bfd6dffb8",
  "result": {
    "markdown": "---\ntitle: Styling charts for RSS publications\nformat:\n  html:\n    code-fold: true\n    code-tools: true\nexecute: \n  eval: false\n  echo: true\neditor: source\n---\n\n::: {.callout-warning appearance=\"simple\"}\nThis site and its content are in development. The authors welcome feedback. Please either \\[insert info about raising an issue/PR/email etc.\\]\n:::\n\n## Styling charts with different tools\n\nIn this section, we discuss the technical details of how to change the style of charts built with some of the most common types of software used to create data visualisations.\n\n### R\n\n[R](https://www.r-project.org/) is a programming language which is popular for statistical computing and graphics. There are many packages with R that can be used to create data visualisations, and we don’t aim to cover them all here. Instead, we address the most common methods: built-in base R graphics, and the {ggplot2} package.\n\nTo help authors with styling their charts to fit in with the guidance in this document, we have developed an R package, [{RSSthemes}](https://github.com/nrennie/RSSthemes). We include some examples of using the package here, but encourage readers to check the GitHub repository for any updates.\n\nWe aim to add this package to CRAN in the near future, but in the meantime you can install the development version from GitHub:\n\n\n::: {.cell}\n\n```{.r .cell-code}\nremotes::install_github(\"nrennie/RSSthemes\")\n```\n:::\n\n\nYou can then load the package using:\n\n\n::: {.cell}\n\n```{.r .cell-code}\nlibrary(RSSthemes)\n```\n:::\n\n\n#### Base R\n\nR has built-in graphics capabilities that allow users to make a wide range of data visualisations without installing any additional packages. This [blog post from Jumping Rivers](https://www.jumpingrivers.com/blog/styling-base-r-graphics/) provides instructions on how to style graphics created in base R.\n\n**Example**: changing bar chart colours in base R\n\nIf all of the bars, lines, points, etc. should have the same colour, you can set the `col` argument to have one of the RSS colours. The options are: `signif_red`, `signif_blue`, `signif_green`, `signif_orange`, or `signif_yellow`.\n\n\n::: {.cell}\n\n```{.r .cell-code}\nbarplot(table(mtcars$gear), col = signif_blue)\n```\n:::\n\n\n![Bar chart with bars coloured in Significance blue](images/tools-blue-base.png){fig-alt=\"Bar charts visualising plant growth of average hght for different treatments with user specified colours red, blue, and dark green.\"}\n\nIf you colours in your plot are based on values in your data, you can set the default colours using the `palette()` function. Within {RSSthemes}, the `set_rss_palette()` function changes the default colours used. There are currently three palettes available in {RSSthemes}, although we hope to add more in the future. The options are `signif_qual`, `signif_div`, or `signif_seq`.\n\n\n::: {.cell}\n\n```{.r .cell-code}\nset_rss_palette(\"signif_qual\")\nplot(1:4, 1:4, col=1:4, pch=19, cex=3, xlab=\"\", ylab=\"\")\n```\n:::\n\n\n![Scatter plot showing the colours from the `signif_qual` palette](images/tools-qual-base.png){fig-alt=\"Scatter plot showing the colours from signif_qual\"}\nRun `palette(\"default\")` to reset to original base R colours.\n\n**Example**: changing the styling of base R plots\n\nWithin the `plot()` function (and related base R plotting functions such as `barplot()`, and `hist()`) , there are arguments to control how the non-data elements of the plot look. For example, the `family` argument changes which font family is used. You can also set many of these arguments globally by calling the `par()` function. Within {RSSthemes}, there is a function `set_signif_par()` which sets some default options, including the text alignment and font for all base R plots. We also recommend adding reference lines using the `abline()` function.\n\n\n::: {.cell}\n\n```{.r .cell-code}\nset_signif_par()\nplot(1:4, 1:4, col=1:4, pch=19, cex=3, xlab=\"\", ylab=\"\",\n     main = \"My Significance Plot\",\n     sub = \"Source: data source\")\nabline(h=1:4, v=1:4, col = \"lightgrey\")\n```\n:::\n\n\n![Scatter plot showing the base R styling implemented by `set_signif_par()`](images/tools-theme-base.png){fig-alt=\"Scatter plot showing the base R styling implemented by the Significance par function.\"}\n\n#### {ggplot2}\n\n{ggplot2} is an R package within the {tidyverse} framework specifically for creating data visualisations. The [package documentation](https://ggplot2.tidyverse.org/) provides guidance on how to create different types of charts. Advice on [changing the colours](https://ggplot2-book.org/scale-colour.html) and [styles](https://ggplot2-book.org/polishing.html) of {ggplot2} visualisations, can be found in the [ggplot2: Elegant Graphics for Data Analysis](https://ggplot2-book.org/index.html) book by Hadley Wickham, Danielle Navarro, and Thomas Lin Pedersen.\n\nLet’s set up a basic data set to make some plots wih {ggplot2}.\n\n\n::: {.cell}\n\n```{.r .cell-code}\nlibrary(ggplot2)\nplot_df <- data.frame(x = LETTERS[1:4],\n                      y = 1:4)\n```\n:::\n\n\n**Example**: changing the non-mapped colours in {ggplot2}\n\nIn {ggplot2}, the `colour` (or `color`) arguments changes the colour that outlines an element, and `fill` changes the colour that fills the element. If all of the, e.g. bars, lines, or points should have the same colour, you can set either the `fill` or `colour` arguments to have one of the RSS colours. The options are: `signif_red`, `signif_blue`, `signif_green`, `signif_orange`, or `signif_yellow`.\n\n\n::: {.cell}\n\n```{.r .cell-code}\nggplot(data = plot_df,\n       mapping = aes(x = x, y = y)) +\n  geom_col(fill = signif_yellow)\n```\n:::\n\n\n![Bar chart with bars coloured yellow](images/tools-yellow-bars.png){fig-alt=\"Bar chart with bars coloured yellow\"}\n**Example**: using a discrete colour scale in {ggplot2}\n\nFor working with qualitative (discrete) data, the best palette to use is `\"signif_qual\"`. This palette currently only contains four colours.\n\n* Discrete (fill) scale: `scale_fill_rss_d()`\n\n\n::: {.cell}\n\n```{.r .cell-code}\nggplot(data = plot_df,\n       mapping = aes(x = x, y = y, fill = x)) +\n  geom_col() +\n  scale_fill_rss_d(palette = \"signif_qual\")\n```\n:::\n\n\n![Bar chart with colours from `signif_qual`](images/tools-qual-bars.png){fig-alt=\"Bar chart with colours from signif_qual\"}\n\n* Discrete (colour) scale: `scale_colour_rss_d()`\n\n\n::: {.cell}\n\n```{.r .cell-code}\nggplot(data = plot_df,\n       mapping = aes(x = x, y = y, colour = x)) +\n  geom_point(size = 4) +\n  scale_colour_rss_d(palette = \"signif_qual\")\n```\n:::\n\n\n![Scatter plot with colours from `signif_qual`](images/tools-qual-points.png){fig-alt=\"Scatter plot with colours from signif_qual\"}\n\n**Example**: using a continuous colour scale in {ggplot2}\n\nContinuous colour scales may be sequential or diverging. For working with sequential (continuous) data, the best palette to use is `\"signif_seq\"`.\n\n* Continuous (fill) scale: `scale_fill_rss_c()`\n\n\n::: {.cell}\n\n```{.r .cell-code}\nggplot(data = plot_df,\n       mapping = aes(x = x, y = y, fill = y)) +\n  geom_col() +\n  scale_fill_rss_c(palette = \"signif_seq\")\n```\n:::\n\n\n![Bar chart showing sequential green colour palette](images/tools-seq-bars.png){fig-alt=\"Bar chart showing sequential green colour palette\"}\n\n* Continuous (colour) scale: `scale_colour_rss_c()`\n\n\n::: {.cell}\n\n```{.r .cell-code}\nggplot(data = plot_df,\n       mapping = aes(x = x, y = y, colour = y)) +\n  geom_point(size = 4) +\n  scale_colour_rss_c(palette = \"signif_seq\")\n```\n:::\n\n\n![Scatter plot showing sequential green colour palette](images/tools-seq-points.png){fig-alt=\"Scatter plot showing sequential green colour palette\"}\n\n\nFor working with diverging (continuous) data, the best palette to use is `\"signif_div\"`.\n\n* Continuous (fill) scale: `scale_fill_rss_c()`\n\n\n::: {.cell}\n\n```{.r .cell-code}\nggplot(data = plot_df,\n       mapping = aes(x = x, y = y, fill = y)) +\n  geom_col() +\n  scale_fill_rss_c(palette = \"signif_div\")\n```\n:::\n\n\n![Bar chart showing diverging red to blue palette](images/tools-div-bars.png){fig-alt=\"Bar chart showing diverging red to blue palette\"}\n\nIf you want to centre the diverging scale around a different value, you can alternatively pass the pre-defined colours from {RSSthemes} into `scale_fill_gradient2()` in {ggplot2}:\n\n\n::: {.cell}\n\n```{.r .cell-code}\nggplot(data = plot_df,\n       mapping = aes(x = x, y = y, fill = y)) +\n  geom_col() +\n  scale_fill_gradient2(low = signif_red, high = signif_blue, midpoint = 2)\n```\n:::\n\n\n![Bar chart showing diverging red to blue palette centred at 2](images/tools-div-bars-grad.png){fig-alt=\"Bar chart showing diverging red to blue palette centred at 2\"}\n\n**Example**: changing the theme in {ggplot2}\n\nWithin {ggplot2}, themes allow you to control the appearance of the non-data elements of your plot. The default theme is `theme_grey()` which has a darker background. We recommend using a white or transparent background, such as those created with `theme_minimal()` or `theme_bw()`.\n\nYou can also use `theme_significance()` from {RSSthemes} which additionally sets the plot font to one of those used in Significance magazine. Check that you have already run `library(RSSthemes)` to ensure the fonts load correctly.\n\n\n::: {.cell}\n\n```{.r .cell-code}\nggplot(data = plot_df,\n       mapping = aes(x = x, y = y, fill = x)) +\n  geom_col() +\n  labs(title = \"My Significance Plot\",\n       subtitle = \"Some longer sentence explaining what is happening in the chart.\",\n       caption = \"Source: name of data source\") +\n  scale_fill_rss_d(palette = \"signif_qual\") +\n  theme_significance()\n```\n:::\n\n\n![Bar chart styled with `theme_significance()`](images/tools-theme.png){fig-alt=\"Bar chart with bars coloured green, yellow, blue, and orange showing custom theme\"}\n\nIf you find a bug in the {RSSthemes} package, or something that isn’t working quite as you expected, please submit a [GitHub issue](https://github.com/nrennie/RSSthemes/issues).\n\n### Python\n\n[Python](https://www.python.org/) is a general-purpose programming language, with libraries available that provide capabilities for data analysis and visualisation.\n\n#### Matplotlib\n\n[Matplotlib](https://matplotlib.org/) is a Python library for creating static, animated, and interactive data visualisations.\n\n**Example**: changing bar chart colours in matplotlib\n\n```{{python}}\n```\n\n**Example**: changing the font family in matplotlib\n\n```{{python}}\n```\n\n### Microsoft Excel\n\nMicrosoft Excel is a spreadsheet developed by Microsoft which features tools for making graphics, among other capabilities including performing calculations and statistical analysis.\n\n**Example**: changing the colours in Microsoft Excel\n\n\n**Example**: changing the colours in Microsoft Excel\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n",
    "supporting": [],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {},
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}